<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>C++进阶记录 &mdash; leelongcrazy's blog</title>
  <meta name="author" content="leelongcrazy">






  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">


    <link href="/favicon.png" rel="icon">

  <link href="/theme/css/main.css" media="screen, projection"
        rel="stylesheet" type="text/css">

  <link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic"
        rel="stylesheet" type="text/css">
  <link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic"
        rel="stylesheet" type="text/css">
</head>

<body>
  <header role="banner"><hgroup>
  <h1><a href="/">leelongcrazy's blog</a></h1>
</hgroup></header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
</ul>


<ul class="main-navigation">
      <li >
        <a href="/category/article.html">Article</a>
      </li>
      <li >
        <a href="/category/books.html">Books</a>
      </li>
      <li class="active">
        <a href="/category/cpp.html">Cpp</a>
      </li>
      <li >
        <a href="/category/import.html">Import</a>
      </li>
      <li >
        <a href="/category/it.html">It</a>
      </li>
      <li >
        <a href="/category/movie.html">Movie</a>
      </li>
      <li >
        <a href="/category/software.html">Software</a>
      </li>
      <li >
        <a href="/category/tech.html">Tech</a>
      </li>
      <li >
        <a href="/category/web.html">Web</a>
      </li>
</ul></nav>
  <div id="main">
    <div id="content">
<div>
  <article class="hentry" role="article">
<header>
      <h1 class="entry-title">C++进阶记录</h1>
    <p class="meta">
<time datetime="2021-09-28T17:00:00+08:00" pubdate>Tue 28 September 2021</time>    </p>
</header>

  <div class="entry-content"><h1>神奇的用法：</h1>
<blockquote>
<p>通过编译执行<code>printf("\a");</code>可以让电脑发出声音。Windows如此</p>
</blockquote>
<h3>#pragma</h3>
<ul>
<li>在所有的预处理指令中，#pragma 指令可能是最复杂的了，它的作用是设定编译器的状态或者是指示编译器完成一些特定的动作。#pragma指令对每个编译器给出了一个方法，在保持与C和C++语言完全兼容的情况下，给出主机或操作系统专有的特征。依据定义，编译指示是机器或操作系统专有的，且对于每个编译器都是不同的。   #pragma once   只要在头文件的最开始加入这条指令就能够保证头文件被编译一次</li>
</ul>
<h4><em>#ifndef，#define，#endif这个是C++语言相关，这是C++语言中的宏定义，通过宏定义避免文件多次编译。所以在所有支持C++语言的编译器上都是有效的，如果写的程序要跨平台，最好使用这种方式（被称为预处理指令）</em></h4>
<h3>#pragma comment</h3>
<p>该指令将一个注释记录放入一个对象文件或可执行文件中。
常用的lib关键字，可以帮我们连入一个库文件。</p>
<h2>for(;;)   --&gt; 近似于while(True) 死循环停留</h2>
<h4>include头文件时尖括号&lt;&gt;与双引号""的区别：</h4>
<ul>
<li>系统自带的头文件用尖括号；编译器会在系统文件目录查找；</li>
<li>用户自定义的头文件用双引号导入；编译器会先在用户目录下查找，然后再到C++安装目录中查找；最后在系统文件中查找</li>
</ul>
<h2>GetTickCount（）</h2>
<p>GetTickCount()是一种函数，返回从操作系统启动所经过的毫秒数，返回值是DWORD。</p>
<p>获取两次，取差值可以用于计时。</p>
<h2>try,catch异常捕获</h2>
<div class="highlight"><pre><span></span><code><span class="c1">// 异常捕获</span>
<span class="k">try</span><span class="p">{</span>
    <span class="c1">// to do something</span>
    <span class="k">throw</span> <span class="s">&quot;Error&quot;</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">catch</span> <span class="p">(</span><span class="kt">char</span> <span class="o">*</span> <span class="n">error</span><span class="p">){</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">error</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">catch</span><span class="p">(...){</span> <span class="c1">// 这里捕获前面没有捕获到的错误，...代表一切错误</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;未知错误&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>


<h1>C++编码安全</h1>
<ul>
<li>不使用无长度限制的字符拷贝函数</li>
<li>switch中应有default</li>
<li>避免函数的声明和实现不同（注意函数名和参数，及返回值类型）</li>
<li>不得直接使用刚分配的未初始化的内存-》对新分配的内存赋初值</li>
</ul>
<h2>C++ 变量默认初始化</h2>
<ol>
<li>全局变量编译器会自动赋初值，局部变量需要自己初始化，否则编译器中报错（MSVC2015测试中会报错，其他编译器未知）</li>
<li>静态变量无论全局还是局部，编译器都会赋初值。</li>
</ol>
<h2>类型转换</h2>
<div class="highlight"><pre><span></span><code><span class="c1">// char * -&gt; string</span>
<span class="kt">char</span> <span class="o">*</span> <span class="n">data</span> <span class="o">=</span> <span class="s">&quot;Hello world!&quot;</span><span class="p">;</span>
<span class="n">string</span> <span class="n">str</span> <span class="o">=</span> <span class="n">data</span><span class="p">;</span>
<span class="c1">// 方法2</span>
<span class="n">string</span> <span class="nf">str</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">data_len</span><span class="p">);</span>

<span class="c1">// string -&gt; char *</span>
<span class="n">string</span> <span class="n">str</span> <span class="o">=</span> <span class="s">&quot;hello world&quot;</span><span class="p">;</span>
<span class="kt">char</span> <span class="o">*</span> <span class="n">pstr</span> <span class="o">=</span> <span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="p">)</span> <span class="n">str</span><span class="p">.</span><span class="n">data</span><span class="p">();</span>

<span class="c1">// string -&gt; CString</span>
<span class="c1">// 方法1</span>
<span class="n">string</span> <span class="n">str1</span> <span class="o">=</span> <span class="s">&quot;Hello world.&quot;</span><span class="p">;</span>
<span class="n">CString</span> <span class="n">cStr</span><span class="p">;</span>
<span class="n">cStr</span><span class="p">.</span><span class="n">Format</span><span class="p">(</span><span class="n">_T</span><span class="p">(</span><span class="s">&quot;%s&quot;</span><span class="p">),</span> <span class="n">str1</span><span class="p">.</span><span class="n">c_str</span><span class="p">());</span>
<span class="c1">// 方法2 &gt;&gt; 不会打导致乱码显示 (windows系统，MSVC环境下)</span>
<span class="n">string</span> <span class="n">str1</span> <span class="o">=</span> <span class="s">&quot;Hello world.&quot;</span><span class="p">;</span>
<span class="n">CA2T</span> <span class="nf">temp</span><span class="p">(</span><span class="n">st1</span><span class="p">.</span><span class="n">c_str</span><span class="p">());</span>
<span class="n">CString</span> <span class="n">cStr</span> <span class="o">=</span> <span class="p">(</span><span class="n">LPCTSTR</span><span class="p">)</span><span class="n">temp</span><span class="p">;</span>

<span class="c1">// CString -&gt; string</span>
<span class="n">CString</span> <span class="n">cstr</span> <span class="o">=</span> <span class="n">_T</span><span class="p">(</span><span class="s">&quot;Hello world&quot;</span><span class="p">);</span>
<span class="n">string</span> <span class="n">str</span> <span class="o">=</span> <span class="n">CT2A</span><span class="p">(</span><span class="n">cstr</span><span class="p">.</span><span class="n">GetString</span><span class="p">());</span>
</code></pre></div>


<h2>string字符串大小写转换的办法</h2>
<div class="highlight"><pre><span></span><code><span class="n">std</span><span class="o">::</span><span class="n">transform</span><span class="p">(</span><span class="n">ss</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">ss</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span> <span class="n">ss</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">toupper</span><span class="p">);</span> <span class="c1">// 将string 转换为大写</span>
<span class="n">std</span><span class="o">::</span><span class="n">transform</span><span class="p">(</span><span class="n">ss</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">ss</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span> <span class="n">ss</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">tolower</span><span class="p">);</span> <span class="c1">// 将string 转换为小写</span>
</code></pre></div>


<h1>C++问题实例</h1>
<h2>UDP数据发送接收</h2>
<div class="highlight"><pre><span></span><code>    <span class="n">CInitSock</span> <span class="n">initSock</span><span class="p">;</span>
    <span class="n">SOCKET</span> <span class="n">SendSocket</span> <span class="o">=</span> <span class="o">::</span><span class="n">socket</span><span class="p">(</span><span class="n">AF_INET</span><span class="p">,</span> <span class="n">SOCK_DGRAM</span><span class="p">,</span> <span class="n">IPPROTO_UDP</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">SendSocket</span> <span class="o">==</span> <span class="n">INVALID_SOCKET</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="c1">// 设置超时时间</span>
    <span class="kt">long</span> <span class="n">secs</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span> <span class="n">u_secs</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="n">DWORD</span> <span class="n">dw</span> <span class="o">=</span> <span class="p">(</span><span class="n">secs</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">)</span> <span class="o">+</span> <span class="p">((</span><span class="n">u_secs</span> <span class="o">+</span> <span class="mi">999</span><span class="p">)</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">);</span>
    <span class="n">setsockopt</span><span class="p">(</span><span class="n">SendSocket</span><span class="p">,</span> <span class="n">SOL_SOCKET</span><span class="p">,</span> <span class="n">SO_RCVTIMEO</span><span class="p">,</span> <span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">dw</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">dw</span><span class="p">));</span>

    <span class="n">sockaddr_in</span> <span class="n">addr</span><span class="p">;</span>
    <span class="n">addr</span><span class="p">.</span><span class="n">sin_addr</span><span class="p">.</span><span class="n">S_un</span><span class="p">.</span><span class="n">S_addr</span> <span class="o">=</span> <span class="n">inet_addr</span><span class="p">(</span><span class="s">&quot;239.0.0.1&quot;</span><span class="p">);</span>
    <span class="n">addr</span><span class="p">.</span><span class="n">sin_family</span> <span class="o">=</span> <span class="n">AF_INET</span><span class="p">;</span>
    <span class="n">addr</span><span class="p">.</span><span class="n">sin_port</span> <span class="o">=</span> <span class="n">htons</span><span class="p">(</span><span class="mi">28888</span><span class="p">);</span>
    <span class="kt">int</span> <span class="n">len</span> <span class="o">=</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">addr</span><span class="p">);</span>

    <span class="n">string</span> <span class="n">temp</span> <span class="o">=</span> <span class="s">&quot;Hello world.&quot;</span><span class="p">;</span>
    <span class="kt">char</span> <span class="o">*</span> <span class="n">send_data</span> <span class="o">=</span> <span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="p">)</span><span class="n">temp</span><span class="p">.</span><span class="n">data</span><span class="p">();</span>
    <span class="kt">int</span> <span class="n">send_len</span> <span class="o">=</span> <span class="n">temp</span><span class="p">.</span><span class="n">length</span><span class="p">();</span>

    <span class="kt">int</span> <span class="n">ss</span> <span class="o">=</span> <span class="n">sendto</span><span class="p">(</span><span class="n">SendSocket</span><span class="p">,</span> <span class="n">send_data</span><span class="p">,</span> <span class="n">send_len</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="n">sockaddr</span><span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">addr</span><span class="p">,</span> <span class="n">len</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">ss</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;send error&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kt">char</span> <span class="n">recv_data</span><span class="p">[</span><span class="mi">1024</span><span class="p">];</span>
    <span class="n">memset</span><span class="p">(</span><span class="n">recv_data</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1024</span><span class="p">);</span>
    <span class="k">while</span> <span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">recvfrom</span><span class="p">(</span><span class="n">SendSocket</span><span class="p">,</span> <span class="n">recv_data</span><span class="p">,</span> <span class="mi">1024</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="n">sockaddr</span><span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">addr</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">len</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">n</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;receive message error&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="n">string</span> <span class="n">recv</span> <span class="o">=</span> <span class="n">recv_data</span><span class="p">;</span>
        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;接收到数据：&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">recv</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
</code></pre></div>


<h2>获取指定IP的Mac地址</h2>
<div class="highlight"><pre><span></span><code><span class="n">string</span> <span class="nf">getRemoteMac</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span> <span class="n">localIP</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span> <span class="n">remoteIP</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">string</span> <span class="n">temp</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="o">*</span><span class="n">pbHexMac</span><span class="p">;</span>
    <span class="n">WSADATA</span> <span class="n">wsaData</span><span class="p">;</span>

    <span class="kt">int</span> <span class="n">iRet</span> <span class="o">=</span> <span class="n">WSAStartup</span><span class="p">(</span><span class="n">MAKEWORD</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="o">&amp;</span><span class="n">wsaData</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">iRet</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Error&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
        <span class="k">return</span> <span class="s">&quot;&quot;</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">IPAddr</span> <span class="n">nRemoteAddr</span> <span class="o">=</span> <span class="n">inet_addr</span><span class="p">(</span><span class="n">remoteIP</span><span class="p">);</span>
    <span class="n">IPAddr</span> <span class="n">nLocalAddr</span> <span class="o">=</span> <span class="n">inet_addr</span><span class="p">(</span><span class="n">localIP</span><span class="p">);</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">macAddress</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
    <span class="n">ULONG</span> <span class="n">macAddrLen</span> <span class="o">=</span> <span class="mi">6</span><span class="p">;</span>
    <span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">macAddress</span><span class="p">,</span> <span class="mh">0xff</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">macAddress</span><span class="p">));</span>
    <span class="k">auto</span> <span class="n">res</span> <span class="o">=</span> <span class="n">SendARP</span><span class="p">(</span><span class="n">nRemoteAddr</span><span class="p">,</span> <span class="n">nLocalAddr</span><span class="p">,</span> <span class="n">macAddress</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">macAddrLen</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">((</span><span class="n">res</span> <span class="o">==</span> <span class="n">NO_ERROR</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">macAddrLen</span> <span class="o">==</span> <span class="mi">6</span><span class="p">))</span> <span class="p">{</span>
        <span class="n">pbHexMac</span> <span class="o">=</span> <span class="n">macAddress</span><span class="p">;</span>
        <span class="n">temp</span><span class="p">.</span><span class="n">Format</span><span class="p">(</span><span class="n">_T</span><span class="p">(</span><span class="s">&quot;%02X:%02X:%02X:%02X:%02X:%02X &quot;</span><span class="p">),</span> <span class="n">pbHexMac</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">pbHexMac</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
        <span class="n">pbHexMac</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">pbHexMac</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">pbHexMac</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span> <span class="n">pbHexMac</span><span class="p">[</span><span class="mi">5</span><span class="p">]);</span>
        <span class="k">return</span> <span class="n">temp</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="p">{</span>
        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Send arp error&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
        <span class="k">return</span> <span class="s">&quot;&quot;</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>


<h2>需求：将int类型转化为高,低位两个字节存储</h2>
<p>int类型默认为4个字节，32位存储；
首先将int类型转换为<code>unsigned short</code>类型，2个字节，16位存储；
然后分别获取高位，低位存储
代码如下：</p>
<div class="highlight"><pre><span></span><code>    <span class="n">BYTE</span> <span class="n">data</span><span class="p">[</span><span class="mi">50</span><span class="p">];</span> 
    <span class="n">memset</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">data</span><span class="p">));</span>
    <span class="kt">int</span> <span class="n">num</span> <span class="o">=</span> <span class="mi">1024</span><span class="p">;</span>
<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">temp</span> <span class="o">=</span> <span class="p">(</span><span class="kt">unsigned</span> <span class="kt">short</span><span class="p">)</span><span class="n">num</span><span class="p">;</span>
    <span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp</span> <span class="o">&amp;</span> <span class="mh">0xff</span><span class="p">;</span> <span class="c1">// 获取低位</span>
    <span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp</span> <span class="o">&gt;&gt;</span> <span class="mi">8</span><span class="p">;</span>  <span class="c1">// 右移一个字节，获取高位</span>
</code></pre></div>


<h2>MSVC中std::string变量字符串很长，显示不全的解决办法</h2>
<ol>
<li>调试过程中将变量添加到<code>监视</code>；</li>
<li>在变量名称后面增加<code>.c_str(),s8</code>，便可将变量内容完整显示。</li>
</ol>
<h2>MSVC中调试时，变量显示“字符串中的字符无效”的查看办法</h2>
<ol>
<li>添加变量到监视；</li>
<li>在变量名称后面增加<code>.c_str(),s8</code>，便可显示变量内的值。</li>
</ol>
<p><img alt="image-20210716105740688" src="../images/image-20210716105740688.png"></p>
<blockquote>
<p>如果发现监视中的变量显示“表达式有副作用，将不会进行计算”，可点击右侧的重置标识即可重新计算，显示结果。</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="p">,</span><span class="n">s8</span> <span class="c1">//将字符串转换成Unicode显示</span>
<span class="p">,</span><span class="err">数字</span> <span class="c1">//将变量拆分为数组显示，数字是要显示多少位</span>
<span class="p">,</span><span class="n">x</span> <span class="c1">//16进制查看</span>
<span class="p">,</span><span class="n">hr</span> <span class="c1">//查看Windows HRESULT解释</span>
<span class="p">,</span><span class="n">wm</span>  <span class="c1">//Windows消息</span>
</code></pre></div>


<h2>如何将变量显示“字符串中的字符无效”转换为可在代码显示的形式？</h2>
<h2>获取HTTP Get请求返回的HTML文本</h2>
<p>C++实现的HTTP get请求返回的文本大概是这个样子：</p>
<div class="highlight"><pre><span></span><code>HTTP/1.1 200 
Content-Type: 
Date: Fri, 16 Jul 2021 01:30:04 GMT
Content-Length: 1814

<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;utf-8&quot;</span><span class="p">&gt;&lt;</span><span class="nt">style</span><span class="p">&gt;</span><span class="nt">p</span><span class="p">{</span><span class="k">position</span><span class="p">:</span><span class="kc">relative</span><span class="p">;</span><span class="k">left</span><span class="p">:</span><span class="mi">20</span><span class="kt">px</span><span class="p">;}</span> <span class="nt">a</span><span class="p">{</span><span class="k">position</span><span class="p">:</span><span class="kc">relative</span><span class="p">;</span><span class="k">left</span><span class="p">:</span><span class="mi">20</span><span class="kt">px</span><span class="p">;}</span> <span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>
            Hello world!
        <span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;</span><span class="kd">function</span> <span class="nx">fun0</span><span class="p">(){</span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="mi">2333</span><span class="p">);}</span>
        <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div>


<p>实现获取HTML的功能可以通过按<code>\r\n\r\n</code>切割字符串的形式，并返回切割结果的最后一项。</p>
<div class="highlight"><pre><span></span><code><span class="n">string</span> <span class="n">response_text</span> <span class="o">=</span> <span class="n">request_get_responese</span>
<span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">rest</span> <span class="o">=</span> <span class="n">split2</span><span class="p">(</span><span class="n">response_text</span><span class="p">,</span> <span class="s">&quot;</span><span class="se">\r\n\r\n</span><span class="s">&quot;</span><span class="p">);</span>
    <span class="n">string</span> <span class="n">response</span> <span class="o">=</span> <span class="n">rest</span><span class="p">.</span><span class="n">back</span><span class="p">();</span> <span class="c1">// 获取得返回内容关于html的部分</span>

<span class="c1">// split 函数</span>
<span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">split2</span><span class="p">(</span><span class="k">const</span> <span class="n">string</span> <span class="o">&amp;</span><span class="n">str</span><span class="p">,</span> <span class="k">const</span> <span class="n">string</span> <span class="o">&amp;</span><span class="n">pattern</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">char</span> <span class="o">*</span> <span class="n">strc</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">char</span><span class="p">[</span><span class="n">strlen</span><span class="p">(</span><span class="n">str</span><span class="p">.</span><span class="n">c_str</span><span class="p">())</span> <span class="o">+</span> <span class="mi">1</span><span class="p">];</span>
    <span class="n">strcpy</span><span class="p">(</span><span class="n">strc</span><span class="p">,</span> <span class="n">str</span><span class="p">.</span><span class="n">c_str</span><span class="p">());</span>   <span class="c1">//string转换成C-string</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">res</span><span class="p">;</span>
    <span class="kt">char</span><span class="o">*</span> <span class="n">temp</span> <span class="o">=</span> <span class="n">strtok</span><span class="p">(</span><span class="n">strc</span><span class="p">,</span> <span class="n">pattern</span><span class="p">.</span><span class="n">c_str</span><span class="p">());</span>
    <span class="k">while</span> <span class="p">(</span><span class="n">temp</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">res</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">string</span><span class="p">(</span><span class="n">temp</span><span class="p">));</span>
        <span class="n">temp</span> <span class="o">=</span> <span class="n">strtok</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="n">pattern</span><span class="p">.</span><span class="n">c_str</span><span class="p">());</span>
    <span class="p">}</span>
    <span class="k">delete</span><span class="p">[]</span> <span class="n">strc</span><span class="p">;</span>
    <span class="k">return</span> <span class="n">res</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>


<h2>查看变量在内存中的值</h2>
<p>在MSVC中 <strong>调试-》窗口-》内存-》内存1/2/3/4</strong>，<em>内存1，2，3，4只是窗口而已，打开多个可以查看多个变量的值</em>。</p>
<p><strong>在内存窗口中输入地址：</strong></p>
<ul>
<li>输入指针变量名</li>
<li>输入<code>&amp;+变量名</code><img alt="image-20210817175039857" src="../images/image-20210817175039857.png"></li>
<li>输入变量名--》<em>会把变量的值当做地址</em></li>
<li>输入要监视变量的地址（内存地址）</li>
</ul>
<p><strong>内存存储内容显示方式</strong></p>
<ul>
<li>单、双字节整数显示</li>
<li>4字节整数显示，8，16，32，64字节显示<img alt="image-20210817175506406" src="../images/image-20210817175506406.png"></li>
<li>是否显示符号位</li>
</ul>
<p><em>负数在内存中以补码形式存储。</em></p>
<h2>error C2360: “****”的初始化操作由“case”标签跳过</h2>
<p>尝试成功的解决办法：case 后面的语句用大括号包裹 ｛｝</p>
<h1>C++多线程编程</h1>
<h4>在MFC中</h4>
<p>1.</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;</span> <span class="n">CWinThread</span><span class="o">*</span> <span class="n">AfxBeginThread</span><span class="p">(</span><span class="n">AFX_THREADPROC</span> <span class="n">pfnThreadProc</span><span class="p">,</span> 
<span class="o">&gt;</span>
<span class="o">&gt;</span> <span class="n">LPVOID</span> <span class="n">pParam</span><span class="p">,</span> 
<span class="o">&gt;</span>
<span class="o">&gt;</span> <span class="n">nPriority</span><span class="o">=</span><span class="n">THREAD_PRIORITY_NORMAL</span><span class="p">,</span> 
<span class="o">&gt;</span>
<span class="o">&gt;</span> <span class="n">UINT</span> <span class="n">nStackSize</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> 
<span class="o">&gt;</span>
<span class="o">&gt;</span> <span class="n">DWORD</span> <span class="n">dwCreateFlags</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>  
<span class="o">&gt;</span>
<span class="o">&gt;</span> <span class="n">LPSECURITY_ATTRIBUTES</span> <span class="n">lpSecurityAttrs</span><span class="o">=</span><span class="nb">NULL</span><span class="p">);</span> 
<span class="o">&gt;</span>
<span class="o">&gt;</span> <span class="nl">PfnThreadProc</span><span class="p">:</span><span class="err">指向工作者线程的执行函数的指针，线程函数原型必须声明如下：</span>
<span class="o">&gt;</span>       <span class="n">UINT</span> <span class="n">ExecutingFunction</span><span class="p">(</span><span class="n">LPVOID</span> <span class="n">pParam</span><span class="p">);</span> 
<span class="o">&gt;</span>
<span class="o">&gt;</span> <span class="o">**</span><span class="err">总共</span><span class="mi">6</span><span class="err">个参数，第一个线程处理函数，第二个传递参数，第三，线程优先级，</span>
<span class="o">&gt;</span> <span class="err">第四，分配堆栈大小，第五，代表线程建立后开始执行或是挂起，第六，线程安全属性指针。</span><span class="o">**</span>
<span class="o">&gt;</span>
<span class="o">&gt;</span> <span class="err">请注意，</span><span class="n">ExecutingFunction</span><span class="p">()</span><span class="err">应返回一个</span><span class="n">UINT类型的值</span><span class="err">，用以指明该函数结束的原因。一般情况下，返回</span><span class="mi">0</span><span class="err">表明执行成功。</span>   
<span class="o">&gt;</span>
<span class="o">&gt;</span> <span class="n">pParam</span><span class="err">：传递给线程函数的一个</span><span class="mi">32</span><span class="err">位参数，执行函数将用某种方式解释该值。</span>
<span class="o">&gt;</span>  <span class="err">它可以是数值，或是指向一个结构的指针，甚至可以被忽略；</span>  
<span class="o">&gt;</span>
<span class="o">&gt;</span> <span class="n">nPriority</span><span class="err">：线程的优先级。如果为</span><span class="mi">0</span><span class="err">，则线程与其父线程具有相同的优先级；</span>  
<span class="o">&gt;</span>
<span class="o">&gt;</span> <span class="nl">nStackSize</span><span class="p">:</span><span class="err">线程为自己分配堆栈的大小，其单位为字节。如果</span> <span class="n">nStackSize被设为0</span><span class="err">，则线程的堆栈被设置成与父线程堆栈相同大小；</span>  
<span class="o">&gt;</span>
<span class="o">&gt;</span> <span class="n">dwCreateFlags</span><span class="err">：如果为</span><span class="mi">0</span><span class="err">，则线程在创建后立刻开始执行。如果为</span><span class="n">CREATE_SUSPEND</span><span class="err">，则线程在创建后立刻被挂起；</span>  
<span class="o">&gt;</span>
<span class="o">&gt;</span> <span class="n">lpSecurityAttrs</span><span class="err">：线程的安全属性指针，一般为</span> <span class="nb">NULL</span><span class="err">；</span> 
</code></pre></div>


<p>代码示例：</p>
<div class="highlight"><pre><span></span><code><span class="c1">// 创建后立刻开始执行</span>
<span class="n">CWinThread</span> <span class="o">*</span> <span class="kr">thread</span> <span class="o">=</span> <span class="n">AfxBeginThread</span><span class="p">((</span><span class="n">AFX_THREADPROC</span><span class="p">)</span><span class="n">ThreadFunc</span><span class="p">,</span> <span class="p">(</span><span class="n">LPVOID</span><span class="p">)</span><span class="k">this</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
<span class="kr">thread</span><span class="o">-&gt;</span><span class="n">m_bAutoDelete</span> <span class="o">=</span> <span class="n">TRUE</span><span class="p">;</span>
</code></pre></div>


<p>2.</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;</span> <span class="n">CWinThread</span><span class="o">*</span> <span class="n">AfxBeginThread</span><span class="p">(</span><span class="n">CRuntimeClass</span><span class="o">*</span> <span class="n">pThreadClass</span><span class="p">,</span> 
<span class="o">&gt;</span>
<span class="o">&gt;</span> <span class="kt">int</span> <span class="n">nPriority</span><span class="o">=</span><span class="n">THREAD_PRIORITY_NORMAL</span><span class="p">,</span> 
<span class="o">&gt;</span>
<span class="o">&gt;</span> <span class="n">UINT</span> <span class="n">nStackSize</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> 
<span class="o">&gt;</span>
<span class="o">&gt;</span> <span class="n">DWORD</span> <span class="n">dwCreateFlags</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> 
<span class="o">&gt;</span>
<span class="o">&gt;</span> <span class="n">LPSECURITY_ATTRIBUTES</span> <span class="n">lpSecurityAttrs</span><span class="o">=</span><span class="nb">NULL</span><span class="p">);</span> 
<span class="o">&gt;</span>
<span class="o">&gt;</span> <span class="n">pThreadClass</span> <span class="err">是指向</span> <span class="n">CWinThread</span> <span class="err">的一个导出类的运行时类对象的指针，该导出类定义了被创建的用户界面线程的启动、</span>
<span class="o">&gt;</span> <span class="err">退出等；其它参数的意义同形式</span><span class="mi">1</span><span class="err">。使用函数的这个原型生成的线程也有消息机制，在以后的例子中我们将发现同主线程的机制几乎一样。</span> 
<span class="o">&gt;</span>
<span class="o">&gt;</span> <span class="err">下面我们对</span><span class="n">CWinThread类的数据成员及常用函数进行简要说明</span><span class="err">。</span>  
<span class="o">&gt;</span>
<span class="o">&gt;</span> <span class="n">m_hThread</span><span class="err">：当前线程的句柄；</span>  
<span class="o">&gt;</span>
<span class="o">&gt;</span> <span class="nl">m_nThreadID</span><span class="p">:</span><span class="err">当前线程的</span><span class="n">ID</span><span class="err">；</span>  
<span class="o">&gt;</span>
<span class="o">&gt;</span> <span class="n">m_pMainWnd</span><span class="err">：指向应用程序主窗口的指针</span>  
<span class="o">&gt;</span>
<span class="o">&gt;</span> <span class="n">BOOL</span>  <span class="n">CWinThread</span><span class="o">::</span><span class="n">CreateThread</span><span class="p">(</span><span class="o">**</span><span class="n">DWORD</span><span class="o">**</span> <span class="n">dwCreateFlags</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> 
<span class="o">&gt;</span>
<span class="o">&gt;</span> <span class="n">UINT</span>  <span class="n">nStackSize</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> 
<span class="o">&gt;</span>
<span class="o">&gt;</span> <span class="n">LPSECURITY_ATTRIBUTES</span> <span class="n">lpSecurityAttrs</span><span class="o">=</span><span class="nb">NULL</span><span class="p">);</span> 
</code></pre></div>


<p><a href="https://blog.csdn.net/weixin_41931548/article/details/80802340">引用</a></p>
<h1>Makefile编写</h1>
<h6>“#”符号注释</h6></div>
    <footer>
<p class="meta">
  <span class="byline author vcard">
    Posted by <span class="fn">
        leelongcrazy
    </span>
  </span>
<time datetime="2021-09-28T17:00:00+08:00" pubdate>Tue 28 September 2021</time>  <span class="categories">
    <a class='category' href='/category/cpp.html'>CPP</a>
  </span>
  <span class="categories">
    <a class="category" href="/tag/tech.html">Tech</a>,    <a class="category" href="/tag/programe.html">Programe</a>  </span>
</p><div class="sharing">
</div>    </footer>
  </article>

</div>
<aside class="sidebar">
  <section>
    <h1>Recent Posts</h1>
    <ul id="recent_posts">
      <li class="post">
          <a href="/linux-just-for-fun.html">Linux Just For Fun</a>
      </li>
      <li class="post">
          <a href="/use-gdb-debug.html">use gdb debug</a>
      </li>
      <li class="post">
          <a href="/mac-osgua-yong-de-kuai-jie-gong-neng.html">Mac OS适用的快捷功能</a>
      </li>
      <li class="post">
          <a href="/cjin-jie-ji-lu.html">C++进阶记录</a>
      </li>
      <li class="post">
          <a href="/dai-ma-zhi-liang.html">代码质量</a>
      </li>
    </ul>
  </section>
  <section>
      
    <h1>Categories</h1>
    <ul id="recent_posts">
        <li><a href="/category/article.html">Article</a></li>
        <li><a href="/category/books.html">Books</a></li>
        <li><a href="/category/cpp.html">CPP</a></li>
        <li><a href="/category/import.html">Import</a></li>
        <li><a href="/category/it.html">IT</a></li>
        <li><a href="/category/movie.html">Movie</a></li>
        <li><a href="/category/software.html">Software</a></li>
        <li><a href="/category/tech.html">Tech</a></li>
        <li><a href="/category/web.html">Web</a></li>
    </ul>
  </section>
 

  <section>
  <h1>Tags</h1>
    <a href="/tag/linux.html">linux</a>,    <a href="/tag/debug.html">Debug</a>,    <a href="/tag/mac.html">mac</a>,    <a href="/tag/tech.html">Tech</a>,    <a href="/tag/programe.html">Programe</a>,    <a href="/tag/nginx.html">nginx</a>,    <a href="/tag/vim.html">Vim</a>,    <a href="/tag/git.html">Git</a>,    <a href="/tag/qt.html">Qt</a>,    <a href="/tag/c.html">C++</a>,    <a href="/tag/edu.html">Edu</a>,    <a href="/tag/websec.html">WebSec</a>,    <a href="/tag/pwn.html">PWN</a>,    <a href="/tag/mfc.html">MFC</a>,    <a href="/tag/vue.html">VUE</a>,    <a href="/tag/bash.html">Bash</a>,    <a href="/tag/zsh.html">zsh</a>,    <a href="/tag/github.html">Github</a>,    <a href="/tag/os.html">os</a>,    <a href="/tag/python.html">Python</a>,    <a href="/tag/code.html">Code</a>,    <a href="/tag/iot.html">Iot</a>,    <a href="/tag/ai.html">AI</a>,    <a href="/tag/movie.html">Movie</a>,    <a href="/tag/article.html">Article</a>,    <a href="/tag/it.html">it</a>  </section>


    <section>
        <h1>Social</h1>
        <ul>
            <li><a href="https://github.com/leelongcrazy" target="_blank">Github</a></li>
            <li><a href="https://twitter.com/leelongcrazy" target="_blank">Twitter</a></li>
        </ul>
    </section>
    <section>
        <h1>Blogroll</h1>
        <ul>
            <li><a href="http://leelongcrazy.com" target="_blank">LeeLongCrazy</a></li>
        </ul>
    </section>

</aside>    </div>
  </div>
  <footer role="contentinfo"><p>
    Copyright &copy;  2017&ndash;2022  leelongcrazy &mdash;
  <span class="credit">Powered by <a href="http://getpelican.com">Pelican</a></span>
</p></footer>
  <script src="/theme/js/modernizr-2.0.js"></script>
  <script src="/theme/js/ender.js"></script>
  <script src="/theme/js/octopress.js" type="text/javascript"></script>
</body>
</html>